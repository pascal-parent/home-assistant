# Set the charging helper (sunsynk_house_batteries_charging)
- id: "1697049255860"
  alias: Set House Battery Charging State to On
  description: ""
  trigger:
    - type: power
      platform: device
      device_id: 9912561f3d350a29d8133b9e55cda893
      entity_id: 802f42e84216531885aac10e6e72ca3c
      domain: sensor
      below: 0
  condition: []
  action:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.sunsynk_house_batteries_charging
  mode: single
- id: "1697049687518"
  alias: Set House Battery Charging State to Off
  description: ""
  trigger:
    - type: power
      platform: device
      device_id: 9912561f3d350a29d8133b9e55cda893
      entity_id: 802f42e84216531885aac10e6e72ca3c
      domain: sensor
      above: 0
  condition: []
  action:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.sunsynk_house_batteries_charging
  mode: single

# Set inverter to grid charge up to 60% using the script "sunsynk_grid_charge_house_batteries_to_60"
- id: "1697057266358"
  alias: Grid Charge to 60% for Loadshedding
  description: ""
  trigger:
    - platform: calendar
      event: start
      offset: "-2:0:0"
      entity_id: calendar.loadshedding_local_events
  condition:
    - type: is_battery_level
      condition: device
      device_id: 9912561f3d350a29d8133b9e55cda893
      entity_id: 030a1e9f16e8e9567dcd5486d54783d8
      domain: sensor
      below: 50
  action:
    - service: script.sunsynk_grid_charge_house_batteries_to_60
      data: {}
  mode: single

#Set inverter to stop grid charging using the script "sunsynk_grid_charge_house_batteries_off"
- id: "1697057591249"
  alias: Grid Charge Off 15mins before Loadshedding
  description: ""
  trigger:
    - platform: calendar
      event: start
      offset: -0:15:0
      entity_id: calendar.loadshedding_local_events
  condition: []
  action:
    - service: script.sunsynk_grid_charge_house_batteries_off
      data: {}
  mode: single
